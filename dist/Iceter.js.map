{"version":3,"sources":["webpack:///dist/Iceter.js","webpack:///webpack/bootstrap 84c09cbfdf35137a50a2","webpack:///./src/Iceter.js","webpack:///./src/Heading.js","webpack:///./src/Hr.js","webpack:///./src/Selection.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_Heading","_Heading2","_Hr","_Hr2","_Selection","_Selection2","Iceter","options","this","el","El","document","querySelector","init","value","_initEl","selection","window","getSelection","getRange","html","innerHTML","editorEl","focus","_buildEvent","_this","addEventListener","e","_onKeyDown","_onKeyUp","_onSelectionChange","code","getFocusNode","_parse","_onKeyEnter","Heading","render","newEl","range","data","reg","match","execCommand","parentNode","setAttribute","nodeValue","replace","setRange","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_Heading3","Hr","getPrototypeOf","createRange","setStart","firstChild","setEnd","Selection","getRangeAt","focusNode","removeAllRanges","addRange"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA,KDMM,SAASI,EAAQD,EAASH,GAE/B,YAkBA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAlBhH,GAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,KEhDjiBjB,GAAA,EACA,IAAAmC,GAAAnC,EAAA,GFqDKoC,EAAYzB,EAAuBwB,GEpDxCE,EAAArC,EAAA,GFwDKsC,EAAO3B,EAAuB0B,GEvDnCE,EAAAvC,EAAA,GF2DKwC,EAAc7B,EAAuB4B,GEzDpCE,EF+DQ,WE9DZ,QAAAA,GAAYC,GAAS3B,EAAA4B,KAAAF,EAAA,IACXG,GAAOF,EAAPE,EAERD,MAAKE,GAAKC,SAASC,cAAcH,GACjCD,KAAKK,OFiJN,MA5EA7B,GAAasB,IACXV,IAAK,OACLkB,MAAO,WEnERN,KAAKO,UACLP,KAAKQ,UAAY,GAAAX,GAAA1B,QAAcsC,OAAOC,mBFuErCtB,IAAK,WACLkB,MAAO,WEpER,MAAON,MAAKQ,UAAUG,cFwErBvB,IAAK,UACLkB,MAAO,WErER,GAAIM,2JAOJZ,MAAKE,GAAGW,UAAYD,EACpBZ,KAAKc,SAAWd,KAAKE,GAAGE,cAAc,WACtCJ,KAAKc,SAASC,QACdf,KAAKgB,iBFmEJ5B,IAAK,cACLkB,MAAO,WEhEI,GAAAW,GAAAjB,IACZA,MAAKc,SAASI,iBAAiB,UAAW,SAACC,GAAD,MAAOF,GAAKG,WAAWD,KACjEnB,KAAKc,SAASI,iBAAiB,QAAS,SAACC,GAAD,MAAOF,GAAKI,SAASF,KAC7DhB,SAASe,iBAAiB,kBACxB,SAACC,GAAD,MAAOF,GAAKK,mBAAmBH,QF0EhC/B,IAAK,aACLkB,MAAO,eAEPlB,IAAK,WACLkB,MAAO,SExEDa,GACP,GAAM/B,GAAM+B,EAAEI,KACVtB,EAAKD,KAAKQ,UAAUgB,cAExB,OAAW,UAARpC,EACMY,KAAKyB,OAAOxB,GAEV,UAARb,EACMY,KAAK0B,cADd,UF6ECtC,IAAK,cACLkB,MAAO,eAEPlB,IAAK,qBACLkB,MAAO,eAIPlB,IAAK,SACLkB,MAAO,SEzEHL,GAIL,GAAAR,GAAAtB,SACE8B,KACAO,UAAWR,KAAKQ,YAElB,GAAAb,GAAAxB,SACE8B,KACAO,UAAWR,KAAKQ,gBF8EZV,IExEVW,QAAOX,OAASA,GF+EV,SAASrC,EAAQD,GAEtB,YAQA,SAASY,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHW,OAAOC,eAAe3B,EAAS,cAC7B8C,OAAO,GAGT,IAAI9B,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MGrK3hBqD,EH8KS,WG7Kb,QAAAA,GAAY5B,GAAS3B,EAAA4B,KAAA2B,GACnB3B,KAAKQ,UAAYT,EAAQS,UACzBR,KAAKC,GAAKF,EAAQE,GAClBD,KAAK4B,SHyMN,MAtBApD,GAAamD,IACXvC,IAAK,SACLkB,MAAO,WGlLD,GAKHuB,GAAOC,EAJLtB,EAAkBR,KAAlBQ,UAAWP,EAAOD,KAAPC,GACXK,EAAQL,EAAG8B,KACXC,EAAM,MACNC,EAAQ3B,EAAQA,EAAM2B,MAAMD,GAAO,IAGtCC,IAASA,EAAM,KAChB9B,SAAS+B,YAAY,eAAe,EAAO,IAAMD,EAAM,GAAGpD,QAC1DgD,EAAQrB,EAAUgB,eAClBM,EAAQtB,EAAUG,WAClBkB,EAAMM,WAAWC,aAAa,UAAWH,EAAM,IAC/CJ,EAAMQ,UAAY/B,EAAMgC,QAAQ,MAAO,IAAIA,QAAQ,MAAO,IAC1D9B,EAAU+B,SAAST,QHyLfH,IAGTnE,GAAQW,QGvLMwD,GH2LT,SAASlE,EAAQD,EAASH,GAE/B,YAYA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASiE,GAA2BC,EAAM7E,GAAQ,IAAK6E,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO9E,GAAyB,gBAATA,IAAqC,kBAATA,GAA8B6E,EAAP7E,EAElO,QAAS+E,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAItE,WAAU,iEAAoEsE,GAAeD,GAASrD,UAAYL,OAAO4D,OAAOD,GAAcA,EAAWtD,WAAawD,aAAezC,MAAOsC,EAAU7D,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAe6D,IAAY3D,OAAO8D,eAAiB9D,OAAO8D,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAhBje3D,OAAOC,eAAe3B,EAAS,cAC7B8C,OAAO,GAGT,IAAI9B,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MI9NjiBmB,EAAApC,EAAA,GJkOK6F,EAAYlF,EAAuByB,GIhOlC0D,EJ6OI,SAAU3D,GI5OlB,QAAA2D,GAAYpD,GAAS,MAAA3B,GAAA4B,KAAAmD,GAAAX,EAAAxC,MAAAmD,EAAAF,WAAA/D,OAAAkE,eAAAD,IAAAvF,KAAAoC,KACbD,IJ0QP,MA9BA4C,GAAUQ,EAAI3D,GAQdhB,EAAa2E,IACX/D,IAAK,SACLkB,MAAO,WInPD,GAKHwB,GAJEtB,EAAkBR,KAAlBQ,UAAWP,EAAOD,KAAPC,GACXK,EAAQL,EAAG8B,KACXC,EAAM,UACNC,EAAQ3B,EAAQA,EAAM2B,MAAMD,GAAO,IAGtCC,IAASA,EAAM,KAChBH,EAAQtB,EAAU6C,cAClBvB,EAAMwB,SAASrD,EAAGkC,WAAWoB,WAAY,GACzCzB,EAAM0B,OAAOvD,EAAGkC,WAAWoB,WAAYtB,EAAM,GAAGpD,QAChD2B,EAAU+B,SAAST,GACnB3B,SAAS+B,YAAY,wBACrB/B,SAAS+B,YAAY,wBJ0PjBiB,GACPD,EAAU/E,QAEZX,GAAQW,QIxPMgF,GJ4PT,SAAS1F,EAAQD,GAEtB,YAQA,SAASY,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHW,OAAOC,eAAe3B,EAAS,cAC7B8C,OAAO,GAGT,IAAI9B,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MKhS3hBmF,ELoSW,WKnSf,QAAAA,GAAYjD,GAAWpC,EAAA4B,KAAAyD,GACrBzD,KAAKQ,UAAYA,ELsUlB,MA7BAhC,GAAaiF,IACXrE,IAAK,WACLkB,MAAO,WKvSR,MAAON,MAAKQ,UAAUkD,WAAW,ML2ShCtE,IAAK,eACLkB,MAAO,WKxSR,MAAON,MAAKQ,aL4SXpB,IAAK,eACLkB,MAAO,WKzSR,MAAON,MAAKQ,UAAUmD,aL6SrBvE,IAAK,WACLkB,MAAO,SK3SDwB,GACP,GAAItB,GAAYR,KAAKQ,SACrBA,GAAUoD,kBACVpD,EAAUqD,SAAS/B,ML8SlB1C,IAAK,cACLkB,MAAO,WK3SR,MAAOH,UAASkD,kBLgTVI,IAGTjG,GAAQW,QK9SMsF,GLkTT,SAAShG,EAAQD","file":"./dist/Iceter.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\t__webpack_require__(4);\n\t\n\tvar _Heading = __webpack_require__(1);\n\t\n\tvar _Heading2 = _interopRequireDefault(_Heading);\n\t\n\tvar _Hr = __webpack_require__(2);\n\t\n\tvar _Hr2 = _interopRequireDefault(_Hr);\n\t\n\tvar _Selection = __webpack_require__(3);\n\t\n\tvar _Selection2 = _interopRequireDefault(_Selection);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Iceter = function () {\n\t  function Iceter(options) {\n\t    _classCallCheck(this, Iceter);\n\t\n\t    var el = options.el;\n\t\n\t\n\t    this.El = document.querySelector(el);\n\t    this.init();\n\t  }\n\t\n\t  _createClass(Iceter, [{\n\t    key: 'init',\n\t    value: function init() {\n\t      this._initEl();\n\t      this.selection = new _Selection2.default(window.getSelection());\n\t    }\n\t  }, {\n\t    key: 'getRange',\n\t    value: function getRange() {\n\t      return this.selection.getRange();\n\t    }\n\t  }, {\n\t    key: '_initEl',\n\t    value: function _initEl() {\n\t      var html = '\\n      <div class=\"editor-wrap\">\\n        <div class=\"editor\" contenteditable=\"true\">\\n          <div>\\u4EAB\\u53D7\\u4E66\\u5199\\uFF01</div>\\n        </div>\\n      </div>\\n    ';\n\t      this.El.innerHTML = html;\n\t      this.editorEl = this.El.querySelector('.editor');\n\t      this.editorEl.focus();\n\t      this._buildEvent();\n\t    }\n\t  }, {\n\t    key: '_buildEvent',\n\t    value: function _buildEvent() {\n\t      var _this = this;\n\t\n\t      this.editorEl.addEventListener('keydown', function (e) {\n\t        return _this._onKeyDown(e);\n\t      });\n\t      this.editorEl.addEventListener('keyup', function (e) {\n\t        return _this._onKeyUp(e);\n\t      });\n\t      document.addEventListener('selectionchange', function (e) {\n\t        return _this._onSelectionChange(e);\n\t      });\n\t    }\n\t  }, {\n\t    key: '_onKeyDown',\n\t    value: function _onKeyDown() {}\n\t  }, {\n\t    key: '_onKeyUp',\n\t    value: function _onKeyUp(e) {\n\t      var key = e.code;\n\t      var el = this.selection.getFocusNode();\n\t\n\t      if (key === 'Space') {\n\t        return this._parse(el);\n\t      }\n\t      if (key === 'Enter') {\n\t        return this._onKeyEnter();\n\t      }\n\t    }\n\t  }, {\n\t    key: '_onKeyEnter',\n\t    value: function _onKeyEnter() {}\n\t  }, {\n\t    key: '_onSelectionChange',\n\t    value: function _onSelectionChange() {\n\t      //Do something\n\t    }\n\t  }, {\n\t    key: '_parse',\n\t    value: function _parse(el) {\n\t      // if(!el.nodeValue) {\n\t      //   el.removeAttribute('md-type')\n\t      // }\n\t      new _Heading2.default({\n\t        el: el,\n\t        selection: this.selection\n\t      });\n\t      new _Hr2.default({\n\t        el: el,\n\t        selection: this.selection\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Iceter;\n\t}();\n\t\n\twindow.Iceter = Iceter;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t* 识别 # 开头的 1-5级标题\n\t* 如: ### 这是标题三\n\t**/\n\t\n\tvar Heading = function () {\n\t  function Heading(options) {\n\t    _classCallCheck(this, Heading);\n\t\n\t    this.selection = options.selection;\n\t    this.el = options.el;\n\t    this.render();\n\t  }\n\t\n\t  _createClass(Heading, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var selection = this.selection,\n\t          el = this.el;\n\t\n\t      var value = el.data;\n\t      var reg = /^#+/;\n\t      var match = value ? value.match(reg) : null;\n\t      var newEl, range;\n\t\n\t      if (match && match[0]) {\n\t        document.execCommand('formatBlock', false, 'H' + match[0].length);\n\t        newEl = selection.getFocusNode();\n\t        range = selection.getRange();\n\t        newEl.parentNode.setAttribute('md-type', match[0]);\n\t        newEl.nodeValue = value.replace(/^#+/, '').replace(/ | /, ''); // eslint-disable-line\n\t        selection.setRange(range);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Heading;\n\t}();\n\t\n\texports.default = Heading;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Heading2 = __webpack_require__(1);\n\t\n\tvar _Heading3 = _interopRequireDefault(_Heading2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * 识别 ***\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               **/\n\t\n\t\n\tvar Hr = function (_Heading) {\n\t  _inherits(Hr, _Heading);\n\t\n\t  function Hr(options) {\n\t    _classCallCheck(this, Hr);\n\t\n\t    return _possibleConstructorReturn(this, (Hr.__proto__ || Object.getPrototypeOf(Hr)).call(this, options));\n\t  }\n\t\n\t  _createClass(Hr, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var selection = this.selection,\n\t          el = this.el;\n\t\n\t      var value = el.data;\n\t      var reg = /^\\*\\*\\*/;\n\t      var match = value ? value.match(reg) : null;\n\t      var range;\n\t\n\t      if (match && match[0]) {\n\t        range = selection.createRange();\n\t        range.setStart(el.parentNode.firstChild, 0);\n\t        range.setEnd(el.parentNode.firstChild, match[0].length);\n\t        selection.setRange(range);\n\t        document.execCommand('insertHorizontalRule');\n\t        document.execCommand('insertParagraph');\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Hr;\n\t}(_Heading3.default);\n\t\n\texports.default = Hr;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Selection = function () {\n\t  function Selection(selection) {\n\t    _classCallCheck(this, Selection);\n\t\n\t    this.selection = selection;\n\t  }\n\t\n\t  _createClass(Selection, [{\n\t    key: \"getRange\",\n\t    value: function getRange() {\n\t      return this.selection.getRangeAt(0);\n\t    }\n\t  }, {\n\t    key: \"getSelection\",\n\t    value: function getSelection() {\n\t      return this.selection;\n\t    }\n\t  }, {\n\t    key: \"getFocusNode\",\n\t    value: function getFocusNode() {\n\t      return this.selection.focusNode;\n\t    }\n\t  }, {\n\t    key: \"setRange\",\n\t    value: function setRange(range) {\n\t      var selection = this.selection;\n\t      selection.removeAllRanges();\n\t      selection.addRange(range);\n\t    }\n\t  }, {\n\t    key: \"createRange\",\n\t    value: function createRange() {\n\t      return document.createRange();\n\t    }\n\t  }]);\n\t\n\t  return Selection;\n\t}();\n\t\n\texports.default = Selection;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/Iceter.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 84c09cbfdf35137a50a2","import './styles/main.sass'\nimport Heading from './Heading'\nimport Hr from './Hr'\nimport Selection from './Selection'\n\nclass Iceter {\n  constructor(options) {\n    const { el } = options\n\n    this.El = document.querySelector(el)\n    this.init()\n  }\n\n  init() {\n    this._initEl()\n    this.selection = new Selection(window.getSelection())\n  }\n\n  getRange() {\n    return this.selection.getRange()\n  }\n\n  _initEl() {\n    var html = `\n      <div class=\"editor-wrap\">\n        <div class=\"editor\" contenteditable=\"true\">\n          <div>享受书写！</div>\n        </div>\n      </div>\n    `\n    this.El.innerHTML = html\n    this.editorEl = this.El.querySelector('.editor')\n    this.editorEl.focus()\n    this._buildEvent()\n  }\n\n\n  _buildEvent() {\n    this.editorEl.addEventListener('keydown', (e) => this._onKeyDown(e))\n    this.editorEl.addEventListener('keyup', (e) => this._onKeyUp(e))\n    document.addEventListener('selectionchange',\n      (e) => this._onSelectionChange(e))\n  }\n\n  _onKeyDown() {\n  }\n\n  _onKeyUp(e) {\n    const key = e.code\n    var el = this.selection.getFocusNode()\n\n    if(key === 'Space') {\n      return this._parse(el)\n    }\n    if(key === 'Enter') {\n      return this._onKeyEnter()\n    }\n  }\n\n  _onKeyEnter() {\n\n  }\n\n  _onSelectionChange() {\n    //Do something\n  }\n\n  _parse(el) {\n    // if(!el.nodeValue) {\n    //   el.removeAttribute('md-type')\n    // }\n    new Heading({\n      el,\n      selection: this.selection\n    })\n    new Hr({\n      el,\n      selection: this.selection\n    })\n  }\n\n}\n\nwindow.Iceter = Iceter\n\n\n\n// WEBPACK FOOTER //\n// ./src/Iceter.js","/**\n* 识别 # 开头的 1-5级标题\n* 如: ### 这是标题三\n**/\n\nclass Heading {\n  constructor(options) {\n    this.selection = options.selection\n    this.el = options.el\n    this.render()\n  }\n\n  render() {\n    var { selection, el } = this\n    const value = el.data\n    const reg = /^#+/\n    const match = value ? value.match(reg) : null\n    var newEl, range\n\n    if(match && match[0]) {\n      document.execCommand('formatBlock', false, 'H' + match[0].length)\n      newEl = selection.getFocusNode()\n      range = selection.getRange()\n      newEl.parentNode.setAttribute('md-type', match[0])\n      newEl.nodeValue = value.replace(/^#+/, '').replace(/ | /, '') // eslint-disable-line\n      selection.setRange(range)\n    }\n  }\n}\n\nexport default Heading\n\n\n\n// WEBPACK FOOTER //\n// ./src/Heading.js","/**\n* 识别 ***\n**/\nimport Heading from './Heading'\n\nclass Hr extends Heading {\n  constructor(options) {\n    super(options)\n  }\n\n  render() {\n    var { selection, el } = this\n    const value = el.data\n    const reg = /^\\*\\*\\*/\n    const match = value ? value.match(reg) : null\n    var range\n\n    if(match && match[0]) {\n      range = selection.createRange()\n      range.setStart(el.parentNode.firstChild, 0)\n      range.setEnd(el.parentNode.firstChild, match[0].length)\n      selection.setRange(range)\n      document.execCommand('insertHorizontalRule')\n      document.execCommand('insertParagraph')\n    }\n  }\n}\n\nexport default Hr\n\n\n\n// WEBPACK FOOTER //\n// ./src/Hr.js","class Selection {\n  constructor(selection) {\n    this.selection = selection\n  }\n\n  getRange() {\n    return this.selection.getRangeAt(0)\n  }\n\n  getSelection() {\n    return this.selection\n  }\n\n  getFocusNode() {\n    return this.selection.focusNode\n  }\n\n  setRange(range) {\n    var selection = this.selection\n    selection.removeAllRanges()\n    selection.addRange(range)\n  }\n\n  createRange() {\n    return document.createRange()\n  }\n\n}\n\nexport default Selection\n\n\n\n// WEBPACK FOOTER //\n// ./src/Selection.js"],"sourceRoot":""}