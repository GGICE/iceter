{"version":3,"sources":["webpack:///dist/Iceter.js","webpack:///webpack/bootstrap 8461c553da130408c51f","webpack:///./src/Iceter.js","webpack:///./src/Heading.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_Heading","_Heading2","Iceter","options","this","el","El","document","querySelector","init","value","selection","window","getSelection","_initEl","getRangeAt","editorWrap","createElement","className","setAttribute","innerHTML","appendChild","editorEl","focus","_buildEvent","_this","addEventListener","e","_onKeyDown","_onKeyUp","_onSelectionChange","code","focusNode","_parse","_onKeyEnter","nodeType","parentNode","removeAttribute","Heading","firstChild","data","reg","match","nodeValue","replace"],"mappings":"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","file":"./dist/Iceter.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\t__webpack_require__(2);\n\t\n\tvar _Heading = __webpack_require__(1);\n\t\n\tvar _Heading2 = _interopRequireDefault(_Heading);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Iceter = function () {\n\t  function Iceter(options) {\n\t    _classCallCheck(this, Iceter);\n\t\n\t    var el = options.el;\n\t\n\t\n\t    this.El = document.querySelector(el);\n\t    this.init();\n\t  }\n\t\n\t  _createClass(Iceter, [{\n\t    key: 'init',\n\t    value: function init() {\n\t      this.selection = window.getSelection();\n\t      this._initEl();\n\t    }\n\t  }, {\n\t    key: 'getRange',\n\t    value: function getRange() {\n\t      return this.selection.getRangeAt(0);\n\t    }\n\t  }, {\n\t    key: '_initEl',\n\t    value: function _initEl() {\n\t      var editorWrap = document.createElement('div');\n\t\n\t      editorWrap.className = 'editor-wrap';\n\t      editorWrap.setAttribute('contenteditable', true);\n\t      editorWrap.innerHTML = '<div>享受书写！</div>';\n\t      this.El.appendChild(editorWrap);\n\t      this.editorEl = this.El.querySelector('.editor-wrap');\n\t      this.editorEl.focus();\n\t      this._buildEvent();\n\t    }\n\t  }, {\n\t    key: '_buildEvent',\n\t    value: function _buildEvent() {\n\t      var _this = this;\n\t\n\t      this.editorEl.addEventListener('keydown', function (e) {\n\t        return _this._onKeyDown(e);\n\t      });\n\t      this.editorEl.addEventListener('keyup', function (e) {\n\t        return _this._onKeyUp(e);\n\t      });\n\t      document.addEventListener('selectionchange', function (e) {\n\t        return _this._onSelectionChange(e);\n\t      });\n\t    }\n\t  }, {\n\t    key: '_onKeyDown',\n\t    value: function _onKeyDown() {\n\t      //Do something\n\t    }\n\t  }, {\n\t    key: '_onKeyUp',\n\t    value: function _onKeyUp(e) {\n\t      var key = e.code;\n\t      var el = this.selection.focusNode;\n\t\n\t      if (key === 'Space') {\n\t        return this._parse(el);\n\t      }\n\t      if (key === 'Enter') {\n\t        return this._onKeyEnter();\n\t      }\n\t    }\n\t  }, {\n\t    key: '_onKeyEnter',\n\t    value: function _onKeyEnter() {\n\t      var el = this.selection.focusNode;\n\t\n\t      if (el.nodeType === 3) {\n\t        el = el.parentNode;\n\t      }\n\t\n\t      el.removeAttribute('md-type');\n\t    }\n\t  }, {\n\t    key: '_onSelectionChange',\n\t    value: function _onSelectionChange() {\n\t      //Do something\n\t    }\n\t  }, {\n\t    key: '_parse',\n\t    value: function _parse(el) {\n\t      // if(!el.nodeValue) {\n\t      //   el.removeAttribute('md-type')\n\t      // }\n\t      new _Heading2.default(el);\n\t    }\n\t  }]);\n\t\n\t  return Iceter;\n\t}();\n\t\n\twindow.Iceter = Iceter;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Heading = function Heading(el) {\n\t  _classCallCheck(this, Heading);\n\t\n\t  if (el.nodeType === 1) {\n\t    el = el.firstChild;\n\t  }\n\t  var value = el.data;\n\t  var reg = /^#+/;\n\t  var match = value ? value.match(reg) : null;\n\t\n\t  if (match && match[0]) {\n\t    el.parentNode.setAttribute('md-type', match[0]);\n\t    el.nodeValue = value.replace(reg, '');\n\t  }\n\t};\n\t\n\texports.default = Heading;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/Iceter.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8461c553da130408c51f","import './styles/main.sass'\nimport Heading from './Heading'\n\nclass Iceter {\n  constructor(options) {\n    const { el } = options\n\n    this.El = document.querySelector(el)\n    this.init()\n  }\n\n  init() {\n    this.selection = window.getSelection()\n    this._initEl()\n  }\n\n  getRange() {\n    return this.selection.getRangeAt(0)\n  }\n\n  _initEl() {\n    var editorWrap = document.createElement('div')\n\n    editorWrap.className = 'editor-wrap'\n    editorWrap.setAttribute('contenteditable', true)\n    editorWrap.innerHTML = '<div>享受书写！</div>'\n    this.El.appendChild(editorWrap)\n    this.editorEl = this.El.querySelector('.editor-wrap')\n    this.editorEl.focus()\n    this._buildEvent()\n  }\n\n\n  _buildEvent() {\n    this.editorEl.addEventListener('keydown', (e) => this._onKeyDown(e))\n    this.editorEl.addEventListener('keyup', (e) => this._onKeyUp(e))\n    document.addEventListener('selectionchange',\n      (e) => this._onSelectionChange(e))\n  }\n\n  _onKeyDown() {\n    //Do something\n  }\n\n  _onKeyUp(e) {\n    const key = e.code\n    var el = this.selection.focusNode\n\n    if(key === 'Space') {\n      return this._parse(el)\n    }\n    if(key === 'Enter') {\n      return this._onKeyEnter()\n    }\n  }\n\n  _onKeyEnter() {\n    var el = this.selection.focusNode\n\n    if(el.nodeType === 3) {\n      el = el.parentNode\n    }\n\n    el.removeAttribute('md-type')\n  }\n\n  _onSelectionChange() {\n    //Do something\n  }\n\n  _parse(el) {\n    // if(!el.nodeValue) {\n    //   el.removeAttribute('md-type')\n    // }\n    new Heading(el)\n  }\n\n}\n\nwindow.Iceter = Iceter\n\n\n\n// WEBPACK FOOTER //\n// ./src/Iceter.js","class Heading {\n  constructor(el) {\n    if(el.nodeType === 1) {\n      el = el.firstChild\n    }\n    const value = el.data\n    const reg = /^#+/\n    const match = value ? value.match(reg) : null\n\n    if(match && match[0]) {\n      el.parentNode.setAttribute('md-type', match[0])\n      el.nodeValue = value.replace(reg, '')\n    }\n  }\n}\n\nexport default Heading\n\n\n\n// WEBPACK FOOTER //\n// ./src/Heading.js"],"sourceRoot":""}