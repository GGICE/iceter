{"version":3,"sources":["webpack:///dist/Iceter.js","webpack:///webpack/bootstrap 612f1e329d1b0047cdd4","webpack:///./src/Iceter.js","webpack:///./src/inline/Inline.js","webpack:///./src/blocks/Block.js","webpack:///./src/blocks/Heading.js","webpack:///./src/blocks/Hr.js","webpack:///./src/blocks/List.js","webpack:///./src/inline/Bold.js","webpack:///./src/inline/Italic.js","webpack:///./src/inline/Strike.js","webpack:///./src/inline/Underline.js","webpack:///./src/selection/Selection.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_Heading","_Heading2","_Hr","_Hr2","_List","_List2","_Selection","_Selection2","_Bold","_Bold2","_Italic","_Italic2","_Underline","_Underline2","_Strike","_Strike2","Iceter","options","this","el","El","document","querySelector","value","content","_initEl","selection","window","getSelection","getRange","init","html","innerHTML","editorEl","focus","_buildEvent","_this","addEventListener","e","_onKeyDown","_onKeyUp","_onSelectionChange","_mk2El","_mk2ElInline","code","getFocusNode","_parse","newOptions","assign","matched","_parseInline","Inline","reg","cmdName","render","isDo","str","range","collapsed","start","startOffset","startContainer","nodeValue","slice","result","exec","notPrevent","setRangeByEl","startEl","index","endOffset","execCommand","_ref","preventDefault","Block","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_Block2","_Block3","Heading","_Block","getPrototypeOf","newEl","data","match","parentNode","Hr","Ul","type","regUn","regOr","test","_Inline2","_Inline3","Bold","_Inline","RegExp","Italic","Strike","Underline","Selection","getRangeAt","focusNode","oldRange","removeAllRanges","addRange","endEl","console","warn","createRange","setStart","setEnd","setRange"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA,KDMM,SAASI,EAAQD,EAASH,GAE/B,YAsCA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAtChH,GAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,KEhDjiBjB,GAAA,GACA,IAAAmC,GAAAnC,EAAA,GFqDKoC,EAAYzB,EAAuBwB,GEpDxCE,EAAArC,EAAA,GFwDKsC,EAAO3B,EAAuB0B,GEvDnCE,EAAAvC,EAAA,GF2DKwC,EAAS7B,EAAuB4B,GE1DrCE,EAAAzC,EAAA,IF8DK0C,EAAc/B,EAAuB8B,GE7D1CE,EAAA3C,EAAA,GFiEK4C,EAASjC,EAAuBgC,GEhErCE,EAAA7C,EAAA,GFoEK8C,EAAWnC,EAAuBkC,GEnEvCE,EAAA/C,EAAA,GFuEKgD,EAAcrC,EAAuBoC,GEtE1CE,EAAAjD,EAAA,GF0EKkD,EAAWvC,EAAuBsC,GExEjCE,EF8EQ,WE7EZ,QAAAA,GAAYC,GAASrC,EAAAsC,KAAAF,EAAA,IACXG,GAAOF,EAAPE,EAERD,MAAKE,GAAKC,SAASC,cAAcH,GFoMlC,MAhHAnC,GAAagC,IACXpB,IAAK,OACL2B,MAAO,SEnFLN,GAAS,GACJO,GAAYP,EAAZO,OAERN,MAAKO,QAAQD,GACbN,KAAKQ,UAAY,GAAAnB,GAAA5B,QAAcgD,OAAOC,mBFuFrChC,IAAK,WACL2B,MAAO,WEpFR,MAAOL,MAAKQ,UAAUG,cFwFrBjC,IAAK,aACL2B,MAAO,SEtFCC,GACTN,KAAKY,MACHN,eF0FD5B,IAAK,UACL2B,MAAO,SEvFFC,GACN,GAAIO,wGAGIP,EAHJ,sCAOJN,MAAKE,GAAGY,UAAYD,EACpBb,KAAKe,SAAWf,KAAKE,GAAGE,cAAc,WACtCJ,KAAKe,SAASC,QACdhB,KAAKiB,iBFoFJvC,IAAK,cACL2B,MAAO,WElFI,GAAAa,GAAAlB,IACZA,MAAKe,SAASI,iBAAiB,UAAW,SAACC,GAAD,MAAOF,GAAKG,WAAWD,KACjEpB,KAAKe,SAASI,iBAAiB,QAAS,SAACC,GAAD,MAAOF,GAAKI,SAASF,KAC7DjB,SAASgB,iBAAiB,kBAAmB,SAACC,GAAD,MAAOF,GAAKK,mBAAmBH,QF6F3E1C,IAAK,aACL2B,MAAO,SE3FCe,GACTpB,KAAKwB,OAAOJ,MF8FX1C,IAAK,WACL2B,MAAO,SE5FDe,GACPpB,KAAKyB,aAAaL,MF+FjB1C,IAAK,qBACL2B,MAAO,eAIP3B,IAAK,SACL2B,MAAO,SE9FHe,GACL,GAAM1C,GAAM0C,EAAEM,KACVzB,EAAKD,KAAKQ,UAAUmB,cAExB,IAAW,UAARjD,EAGD,MAAOsB,MAAK4B,QACV3B,KACAmB,SFmGH1C,IAAK,SACL2B,MAAO,SE/FHN,GACL,GAAM8B,GAAarD,OAAOsD,QACxBtB,UAAWR,KAAKQ,WACfT,EAEH,IAAAhB,GAAAtB,QAAYoE,GACZ,GAAA5C,GAAAxB,QAAOoE,GACP,GAAA1C,GAAA1B,QAASoE,GACT9B,EAAQE,GAAG8B,SAAU,KFkGpBrD,IAAK,eACL2B,MAAO,SEhGGe,GACX,GACMnB,IADMmB,EAAEM,KACH1B,KAAKQ,UAAUmB,eAE1B,OAAO3B,MAAKgC,cACV/B,KACAmB,SFoGD1C,IAAK,eACL2B,MAAO,SEjGGN,GACX,GAAM8B,GAAarD,OAAOsD,QACxBtB,UAAWR,KAAKQ,WACfT,EACH,IAAAR,GAAA9B,QAASoE,GACT,GAAApC,GAAAhC,QAAWoE,GACX,GAAAhC,GAAApC,QAAWoE,GACX,GAAAlC,GAAAlC,QAAcoE,GACd9B,EAAQE,GAAG8B,SAAU,MFqGfjC,IEhGVW,QAAOX,OAASA,GFuGV,SAAS/C,EAAQD,GAEtB,YAQA,SAASY,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHW,OAAOC,eAAe3B,EAAS,cAC7BuD,OAAO,GAGT,IAAIvC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MG9N3hBqE,EHqOQ,WGpOZ,QAAAA,GAAYlC,GAASrC,EAAAsC,KAAAiC,GACnBjC,KAAKQ,UAAYT,EAAQS,UACzBR,KAAKC,GAAKF,EAAQE,GAClBD,KAAKoB,EAAIrB,EAAQqB,EACjBpB,KAAKkC,IAAMnC,EAAQmC,IACnBlC,KAAKmC,QAAUpC,EAAQoC,QACvBnC,KAAKoC,SHkSN,MAxDAtE,GAAamE,IACXvD,IAAK,SACL2B,MAAO,WGxOR,GAAIL,KAAKqC,OAAT,CADO,GAMHC,GAFI9B,EAA4BR,KAA5BQ,UAAW0B,EAAiBlC,KAAjBkC,IAAKC,EAAYnC,KAAZmC,QAClBI,EAAQ/B,EAAUG,UAGxB,IAAG4B,EAAMC,UAAW,CAClB,GAAMC,GAAQF,EAAMG,YACdC,EAAiBJ,EAAMI,cAG7B,IAFAL,EAAMC,EAAMI,eAAeC,WAEvBN,EACF,MAEFA,GAAMA,EAAIO,MAAM,EAAGJ,EACnB,IAAMK,GAASZ,EAAIa,KAAKT,EACxB,KAAIQ,EACF,MAEF9C,MAAK+B,SAASiB,YAAY,IAC1BxC,EAAUyC,cACRC,QAASP,EACTD,YAAaI,EAAOK,MACpBC,UAAWN,EAAOK,MAAQL,EAAO,GAAG3E,SAEtCgC,SAASkD,YAAYlB,GAAS,GAC9B3B,EAAUyC,cACRC,QAASP,EACTD,YAAa,EACbU,UAAW,SHiPd1E,IAAK,UACL2B,MAAO,SG7OFN,GAAS,GAAAuD,GACQvD,MAAfiD,EADOM,EACPN,UACRhD,MAAKC,GAAG8B,SAAU,GACjBiB,GAAchD,KAAKoB,EAAEmC,oBHkPrB7E,IAAK,OACL2B,MAAO,WG/OR,OAAQL,KAAKC,GAAG8B,YHoPVE,IAGTnF,GAAQW,QGnPMwE,GHuPT,SAASlF,EAAQD,GAEtB,YAQA,SAASY,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHW,OAAOC,eAAe3B,EAAS,cAC7BuD,OAAO,GAGT,IAAIvC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MIxT3hB4F,EJ+TO,WI9TX,QAAAA,GAAYzD,GAASrC,EAAAsC,KAAAwD,GACnBxD,KAAKQ,UAAYT,EAAQS,UACzBR,KAAKC,GAAKF,EAAQE,GAClBD,KAAKoB,EAAIrB,EAAQqB,EACjBpB,KAAKoC,SJyVN,MArBAtE,GAAa0F,IACX9E,IAAK,SACL2B,MAAO,eAIP3B,IAAK,UACL2B,MAAO,SIpUFN,GAAS,GAAAuD,GACQvD,MAAfiD,EADOM,EACPN,UACRhD,MAAKC,GAAG8B,SAAU,GACjBiB,GAAchD,KAAKoB,EAAEmC,oBJyUrB7E,IAAK,OACL2B,MAAO,WItUR,OAAQL,KAAKC,GAAG8B,YJ2UVyB,IAGT1G,GAAQW,QI1UM+F,GJ8UT,SAASzG,EAAQD,EAASH,GAE/B,YAYA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS4F,GAA2BC,EAAMxG,GAAQ,IAAKwG,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzG,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwG,EAAPxG,EAElO,QAAS0G,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIjG,WAAU,iEAAoEiG,GAAeD,GAAShF,UAAYL,OAAOuF,OAAOD,GAAcA,EAAWjF,WAAamF,aAAe3D,MAAOwD,EAAUxF,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAewF,IAAYtF,OAAOyF,eAAiBzF,OAAOyF,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAhBjetF,OAAOC,eAAe3B,EAAS,cAC7BuD,OAAO,GAGT,IAAIvC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MK5WjiBuG,EAAAxH,EAAA,GLgXKyH,EAAU9G,EAAuB6G,GK9WhCE,EL4XS,SAAUC,GK3XvB,QAAAD,GAAYtE,GAAS,MAAArC,GAAAsC,KAAAqE,GAAAZ,EAAAzD,MAAAqE,EAAAH,WAAA1F,OAAA+F,eAAAF,IAAAnH,KAAA8C,KACbD,ILkaP,MAvCA6D,GAAUS,EAASC,GAQnBxG,EAAauG,IACX3F,IAAK,SACL2B,MAAO,WKjYR,GAAIL,KAAKqC,OAAT,CADO,GAQHmC,GAJIhE,EAAkBR,KAAlBQ,UAAWP,EAAOD,KAAPC,GACbI,EAAQJ,EAAGwE,KACXvC,EAAM,OACRwC,EAAQrE,EAAQA,EAAMqE,MAAMxC,GAAO,IAGpCwC,IAASA,EAAM,KAChB1E,KAAK+B,UACLvB,EAAUyC,cACRC,QAASjD,EAAG0E,WACZjC,YAAa,EACbU,UAAW,IAEbjD,SAASkD,YAAY,eAAe,EAAO,IAAMqB,EAAM,GAAGvG,QAC1DqG,EAAQhE,EAAUmB,eAClB6C,EAAM5B,UAAY,KAClBpC,EAAUyC,cACRC,QAASsB,EAAMG,mBL0YbN,GACPD,EAAQ3G,QAEVX,GAAQW,QKvYM4G,GL2YT,SAAStH,EAAQD,EAASH,GAE/B,YAYA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS4F,GAA2BC,EAAMxG,GAAQ,IAAKwG,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzG,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwG,EAAPxG,EAElO,QAAS0G,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIjG,WAAU,iEAAoEiG,GAAeD,GAAShF,UAAYL,OAAOuF,OAAOD,GAAcA,EAAWjF,WAAamF,aAAe3D,MAAOwD,EAAUxF,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAewF,IAAYtF,OAAOyF,eAAiBzF,OAAOyF,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAhBjetF,OAAOC,eAAe3B,EAAS,cAC7BuD,OAAO,GAGT,IAAIvC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MMtbjiBuG,EAAAxH,EAAA,GN0bKyH,EAAU9G,EAAuB6G,GMxbhCS,ENqcI,SAAUN,GMpclB,QAAAM,GAAY7E,GAAS,MAAArC,GAAAsC,KAAA4E,GAAAnB,EAAAzD,MAAA4E,EAAAV,WAAA1F,OAAA+F,eAAAK,IAAA1H,KAAA8C,KACbD,INqeP,MAjCA6D,GAAUgB,EAAIN,GAQdxG,EAAa8G,IACXlG,IAAK,SACL2B,MAAO,WM1cR,GAAIL,KAAKqC,OAAT,CADO,GAID7B,GAAkBR,KAAlBQ,UAAWP,EAAOD,KAAPC,GACXI,EAAQJ,EAAGwE,KACXvC,EAAM,WACNwC,EAAQrE,EAAQA,EAAMqE,MAAMxC,GAAO,IAEtCwC,IAASA,EAAM,KAChB1E,KAAK+B,UACLvB,EAAUyC,cACRC,QAASjD,EAAG0E,WACZjC,YAAa,EACbU,UAAW,IAEbjD,SAASkD,YAAY,wBAAwB,EAAO,UNkdhDuB,GACPR,EAAQ3G,QAEVX,GAAQW,QMhdMmH,GNodT,SAAS7H,EAAQD,EAASH,GAE/B,YAYA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS4F,GAA2BC,EAAMxG,GAAQ,IAAKwG,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzG,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwG,EAAPxG,EAElO,QAAS0G,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIjG,WAAU,iEAAoEiG,GAAeD,GAAShF,UAAYL,OAAOuF,OAAOD,GAAcA,EAAWjF,WAAamF,aAAe3D,MAAOwD,EAAUxF,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAewF,IAAYtF,OAAOyF,eAAiBzF,OAAOyF,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAhBjetF,OAAOC,eAAe3B,EAAS,cAC7BuD,OAAO,GAGT,IAAIvC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MOvfjiBuG,EAAAxH,EAAA,GP2fKyH,EAAU9G,EAAuB6G,GOzfhCU,EPugBI,SAAUP,GOtgBlB,QAAAO,GAAY9E,GAAS,MAAArC,GAAAsC,KAAA6E,GAAApB,EAAAzD,MAAA6E,EAAAX,WAAA1F,OAAA+F,eAAAM,IAAA3H,KAAA8C,KACbD,IP6jBP,MAvDA6D,GAAUiB,EAAIP,GAQdxG,EAAa+G,IACXnG,IAAK,SACL2B,MAAO,WO5gBR,GAAIL,KAAKqC,OAAT,CADO,GAQHyC,GAAMJ,EAAOF,EAJXhE,EAAkBR,KAAlBQ,UAAWP,EAAOD,KAAPC,GACXI,EAAQJ,EAAGwE,KACXM,EAAQ,WACRC,EAAQ,QAGXA,GAAMC,KAAK5E,KACZL,KAAK+B,UACL2C,EAAQrE,EAAMqE,MAAMM,GACpBF,EAAO,MAGNC,EAAME,KAAK5E,KACZL,KAAK+B,UACL2C,EAAQrE,EAAMqE,MAAMK,GACpBD,EAAO,MAGNJ,GAASA,EAAM,KAChBlE,EAAUyC,cACRC,QAASjD,EAAG0E,WACZjC,YAAa,EACbU,UAAW,IAED,OAAT0B,GACD3E,SAASkD,YAAY,qBAAqB,GAEhC,OAATyB,GACD3E,SAASkD,YAAY,uBAAuB,GAE9CmB,EAAQhE,EAAUmB,eAClB6C,EAAM5B,UAAY,KAClBpC,EAAUyC,cACRC,QAASsB,EAAMG,mBPqhBbE,GACPT,EAAQ3G,QAEVX,GAAQW,QOlhBMoH,GPshBT,SAAS9H,EAAQD,EAASH,GAE/B,YAUA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS4F,GAA2BC,EAAMxG,GAAQ,IAAKwG,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzG,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwG,EAAPxG,EAElO,QAAS0G,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIjG,WAAU,iEAAoEiG,GAAeD,GAAShF,UAAYL,OAAOuF,OAAOD,GAAcA,EAAWjF,WAAamF,aAAe3D,MAAOwD,EAAUxF,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAewF,IAAYtF,OAAOyF,eAAiBzF,OAAOyF,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAdjetF,OAAOC,eAAe3B,EAAS,cAC7BuD,OAAO,GQjlBV,IAAA6E,GAAAvI,EAAA,GRslBKwI,EAAW7H,EAAuB4H,GQplBjCE,ER8lBM,SAAUC,GQ7lBpB,QAAAD,GAAYrF,GAASrC,EAAAsC,KAAAoF,EACnB,IAAMvD,GAAarD,OAAOsD,UAAW/B,GACnCmC,IAAK,GAAIoD,QAAO,oBAChBnD,QAAS,QAHQ,OAAAsB,GAAAzD,MAAAoF,EAAAlB,WAAA1F,OAAA+F,eAAAa,IAAAlI,KAAA8C,KAKb6B,IRqmBP,MAZA+B,GAAUwB,EAAMC,GAYTD,GACPD,EAAS1H,QAEXX,GAAQW,QQpmBM2H,GRwmBT,SAASrI,EAAQD,EAASH,GAE/B,YAUA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS4F,GAA2BC,EAAMxG,GAAQ,IAAKwG,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzG,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwG,EAAPxG,EAElO,QAAS0G,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIjG,WAAU,iEAAoEiG,GAAeD,GAAShF,UAAYL,OAAOuF,OAAOD,GAAcA,EAAWjF,WAAamF,aAAe3D,MAAOwD,EAAUxF,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAewF,IAAYtF,OAAOyF,eAAiBzF,OAAOyF,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAdjetF,OAAOC,eAAe3B,EAAS,cAC7BuD,OAAO,GSznBV,IAAA6E,GAAAvI,EAAA,GT8nBKwI,EAAW7H,EAAuB4H,GS5nBjCK,ETsoBQ,SAAUF,GSroBtB,QAAAE,GAAYxF,GAASrC,EAAAsC,KAAAuF,EACnB,IAAM1D,GAAarD,OAAOsD,UAAW/B,GACnCmC,IAAK,GAAIoD,QAAO,gBAChBnD,QAAS,UAHQ,OAAAsB,GAAAzD,MAAAuF,EAAArB,WAAA1F,OAAA+F,eAAAgB,IAAArI,KAAA8C,KAKb6B,IT6oBP,MAZA+B,GAAU2B,EAAQF,GAYXE,GACPJ,EAAS1H,QAEXX,GAAQW,QS5oBM8H,GTgpBT,SAASxI,EAAQD,EAASH,GAE/B,YAUA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS4F,GAA2BC,EAAMxG,GAAQ,IAAKwG,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzG,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwG,EAAPxG,EAElO,QAAS0G,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIjG,WAAU,iEAAoEiG,GAAeD,GAAShF,UAAYL,OAAOuF,OAAOD,GAAcA,EAAWjF,WAAamF,aAAe3D,MAAOwD,EAAUxF,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAewF,IAAYtF,OAAOyF,eAAiBzF,OAAOyF,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAdjetF,OAAOC,eAAe3B,EAAS,cAC7BuD,OAAO,GUjqBV,IAAA6E,GAAAvI,EAAA,GVsqBKwI,EAAW7H,EAAuB4H,GUpqBjCM,EV8qBQ,SAAUH,GU7qBtB,QAAAG,GAAYzF,GAASrC,EAAAsC,KAAAwF,EACnB,IAAM3D,GAAarD,OAAOsD,UAAW/B,GACnCmC,IAAK,GAAIoD,QAAO,oBAChBnD,QAAS,iBAHQ,OAAAsB,GAAAzD,MAAAwF,EAAAtB,WAAA1F,OAAA+F,eAAAiB,IAAAtI,KAAA8C,KAKb6B,IVqrBP,MAZA+B,GAAU4B,EAAQH,GAYXG,GACPL,EAAS1H,QAEXX,GAAQW,QUprBM+H,GVwrBT,SAASzI,EAAQD,EAASH,GAE/B,YAUA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS4F,GAA2BC,EAAMxG,GAAQ,IAAKwG,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzG,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwG,EAAPxG,EAElO,QAAS0G,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIjG,WAAU,iEAAoEiG,GAAeD,GAAShF,UAAYL,OAAOuF,OAAOD,GAAcA,EAAWjF,WAAamF,aAAe3D,MAAOwD,EAAUxF,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAewF,IAAYtF,OAAOyF,eAAiBzF,OAAOyF,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAdjetF,OAAOC,eAAe3B,EAAS,cAC7BuD,OAAO,GWzsBV,IAAA6E,GAAAvI,EAAA,GX8sBKwI,EAAW7H,EAAuB4H,GW5sBjCO,EXstBW,SAAUJ,GWrtBzB,QAAAI,GAAY1F,GAASrC,EAAAsC,KAAAyF,EACnB,IAAM5D,GAAarD,OAAOsD,UAAW/B,GACnCmC,IAAK,GAAIoD,QAAO,gBAChBnD,QAAS,aAHQ,OAAAsB,GAAAzD,MAAAyF,EAAAvB,WAAA1F,OAAA+F,eAAAkB,IAAAvI,KAAA8C,KAKb6B,IX6tBP,MAZA+B,GAAU6B,EAAWJ,GAYdI,GACPN,EAAS1H,QAEXX,GAAQW,QW5tBMgI,GXguBT,SAAS1I,EAAQD,GAEtB,YAQA,SAASY,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHW,OAAOC,eAAe3B,EAAS,cAC7BuD,OAAO,GAGT,IAAIvC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MYpvB3hB8H,EZwvBW,WYvvBf,QAAAA,GAAYlF,GAAW9C,EAAAsC,KAAA0F,GACrB1F,KAAKQ,UAAYA,EZ2zBlB,MA9DA1C,GAAa4H,IACXhH,IAAK,WACL2B,MAAO,WY3vBR,MAAOL,MAAKQ,UAAUmF,WAAW,MZ+vBhCjH,IAAK,eACL2B,MAAO,WY5vBR,MAAOL,MAAKQ,aZgwBX9B,IAAK,eACL2B,MAAO,WY7vBR,MAAOL,MAAKQ,UAAUoF,aZiwBrBlH,IAAK,WACL2B,MAAO,SY/vBDkC,GACP,GAAI/B,GAAYR,KAAKQ,SACrBR,MAAK6F,SAAWrH,OAAOsD,UAAW9B,KAAKW,YACvCH,EAAUsF,kBACVtF,EAAUuF,SAASxD,MZ0wBlB7D,IAAK,eACL2B,MAAO,SYlwBGN,GAAS,GACdmD,GAA2CnD,EAA3CmD,QAASR,EAAkC3C,EAAlC2C,YAAasD,EAAqBjG,EAArBiG,MAAO5C,EAAcrD,EAAdqD,SACnC,KAAIF,EACF,MAAOzC,QAAOwF,QAAQC,KAAK,iBAE7B,IAAI3D,GAAQvC,KAAKmG,aACjB5D,GAAM6D,SAASlD,EAASR,GAAe,GACvCH,EAAM8D,OAAOL,GAAS9C,EAASE,GAAaV,GAAe,GAC3D1C,KAAKsG,SAAS/D,MZywBb7D,IAAK,cACL2B,MAAO,WYtwBR,MAAOF,UAASgG,iBZ0wBfzH,IAAK,eACL2B,MAAO,WYvwBR,MAAIL,MAAK6F,aAGT7F,MAAKsG,SAAStG,KAAK6F,UAFVpF,OAAOwF,QAAQC,KAAK,qBZ8wBvBR,IAGT5I,GAAQW,QY3wBMiI,GZ+wBT,SAAS3I,EAAQD","file":"./dist/Iceter.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\t__webpack_require__(11);\n\t\n\tvar _Heading = __webpack_require__(3);\n\t\n\tvar _Heading2 = _interopRequireDefault(_Heading);\n\t\n\tvar _Hr = __webpack_require__(4);\n\t\n\tvar _Hr2 = _interopRequireDefault(_Hr);\n\t\n\tvar _List = __webpack_require__(5);\n\t\n\tvar _List2 = _interopRequireDefault(_List);\n\t\n\tvar _Selection = __webpack_require__(10);\n\t\n\tvar _Selection2 = _interopRequireDefault(_Selection);\n\t\n\tvar _Bold = __webpack_require__(6);\n\t\n\tvar _Bold2 = _interopRequireDefault(_Bold);\n\t\n\tvar _Italic = __webpack_require__(7);\n\t\n\tvar _Italic2 = _interopRequireDefault(_Italic);\n\t\n\tvar _Underline = __webpack_require__(9);\n\t\n\tvar _Underline2 = _interopRequireDefault(_Underline);\n\t\n\tvar _Strike = __webpack_require__(8);\n\t\n\tvar _Strike2 = _interopRequireDefault(_Strike);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Iceter = function () {\n\t  function Iceter(options) {\n\t    _classCallCheck(this, Iceter);\n\t\n\t    var el = options.el;\n\t\n\t\n\t    this.El = document.querySelector(el);\n\t  }\n\t\n\t  _createClass(Iceter, [{\n\t    key: 'init',\n\t    value: function init(options) {\n\t      var content = options.content;\n\t\n\t\n\t      this._initEl(content);\n\t      this.selection = new _Selection2.default(window.getSelection());\n\t    }\n\t  }, {\n\t    key: 'getRange',\n\t    value: function getRange() {\n\t      return this.selection.getRange();\n\t    }\n\t  }, {\n\t    key: 'setContent',\n\t    value: function setContent(content) {\n\t      this.init({\n\t        content: content\n\t      });\n\t    }\n\t  }, {\n\t    key: '_initEl',\n\t    value: function _initEl(content) {\n\t      var html = '\\n      <div class=\"editor-wrap\">\\n        <div class=\"editor\" contenteditable=\"true\">\\n          ' + content + '\\n        </div>\\n      </div>\\n    ';\n\t      this.El.innerHTML = html;\n\t      this.editorEl = this.El.querySelector('.editor');\n\t      this.editorEl.focus();\n\t      this._buildEvent();\n\t    }\n\t  }, {\n\t    key: '_buildEvent',\n\t    value: function _buildEvent() {\n\t      var _this = this;\n\t\n\t      this.editorEl.addEventListener('keydown', function (e) {\n\t        return _this._onKeyDown(e);\n\t      });\n\t      this.editorEl.addEventListener('keyup', function (e) {\n\t        return _this._onKeyUp(e);\n\t      });\n\t      document.addEventListener('selectionchange', function (e) {\n\t        return _this._onSelectionChange(e);\n\t      });\n\t    }\n\t  }, {\n\t    key: '_onKeyDown',\n\t    value: function _onKeyDown(e) {\n\t      this._mk2El(e);\n\t    }\n\t  }, {\n\t    key: '_onKeyUp',\n\t    value: function _onKeyUp(e) {\n\t      this._mk2ElInline(e);\n\t    }\n\t  }, {\n\t    key: '_onSelectionChange',\n\t    value: function _onSelectionChange() {\n\t      //Do something\n\t    }\n\t  }, {\n\t    key: '_mk2El',\n\t    value: function _mk2El(e) {\n\t      var key = e.code;\n\t      var el = this.selection.getFocusNode();\n\t\n\t      if (key === 'Space') {\n\t        //尽量不重写space\n\t        //TODO 去除space多余的空格\n\t        return this._parse({\n\t          el: el,\n\t          e: e\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: '_parse',\n\t    value: function _parse(options) {\n\t      var newOptions = Object.assign({\n\t        selection: this.selection\n\t      }, options);\n\t\n\t      new _Heading2.default(newOptions);\n\t      new _Hr2.default(newOptions);\n\t      new _List2.default(newOptions);\n\t      options.el.matched = false;\n\t    }\n\t  }, {\n\t    key: '_mk2ElInline',\n\t    value: function _mk2ElInline(e) {\n\t      var key = e.code;\n\t      var el = this.selection.getFocusNode();\n\t\n\t      return this._parseInline({\n\t        el: el,\n\t        e: e\n\t      });\n\t    }\n\t  }, {\n\t    key: '_parseInline',\n\t    value: function _parseInline(options) {\n\t      var newOptions = Object.assign({\n\t        selection: this.selection\n\t      }, options);\n\t      new _Bold2.default(newOptions);\n\t      new _Italic2.default(newOptions);\n\t      new _Strike2.default(newOptions);\n\t      new _Underline2.default(newOptions);\n\t      options.el.matched = false;\n\t    }\n\t  }]);\n\t\n\t  return Iceter;\n\t}();\n\t\n\twindow.Iceter = Iceter;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t*  基础 inline\n\t**/\n\tvar Inline = function () {\n\t  function Inline(options) {\n\t    _classCallCheck(this, Inline);\n\t\n\t    this.selection = options.selection;\n\t    this.el = options.el;\n\t    this.e = options.e;\n\t    this.reg = options.reg;\n\t    this.cmdName = options.cmdName;\n\t    this.render();\n\t  }\n\t\n\t  _createClass(Inline, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t      if (!this.isDo()) {\n\t        return;\n\t      }\n\t      var selection = this.selection,\n\t          reg = this.reg,\n\t          cmdName = this.cmdName;\n\t\n\t      var range = selection.getRange();\n\t      var str;\n\t\n\t      if (range.collapsed) {\n\t        var start = range.startOffset;\n\t        var startContainer = range.startContainer;\n\t        str = range.startContainer.nodeValue;\n\t\n\t        if (!str) {\n\t          return;\n\t        }\n\t        str = str.slice(0, start);\n\t        var result = reg.exec(str);\n\t        if (!result) {\n\t          return;\n\t        }\n\t        this.matched({ notPrevent: true });\n\t        selection.setRangeByEl({\n\t          startEl: startContainer,\n\t          startOffset: result.index,\n\t          endOffset: result.index + result[0].length\n\t        });\n\t        document.execCommand(cmdName, false);\n\t        selection.setRangeByEl({\n\t          startEl: startContainer,\n\t          startOffset: 1,\n\t          endOffset: 1\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: \"matched\",\n\t    value: function matched(options) {\n\t      var _ref = options || {},\n\t          notPrevent = _ref.notPrevent;\n\t\n\t      this.el.matched = true;\n\t      !notPrevent && this.e.preventDefault();\n\t    }\n\t  }, {\n\t    key: \"isDo\",\n\t    value: function isDo() {\n\t      return !this.el.matched;\n\t    }\n\t  }]);\n\t\n\t  return Inline;\n\t}();\n\t\n\texports.default = Inline;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t*  基础block\n\t**/\n\tvar Block = function () {\n\t  function Block(options) {\n\t    _classCallCheck(this, Block);\n\t\n\t    this.selection = options.selection;\n\t    this.el = options.el;\n\t    this.e = options.e;\n\t    this.render();\n\t  }\n\t\n\t  _createClass(Block, [{\n\t    key: \"render\",\n\t    value: function render() {\n\t      //Do nothing\n\t    }\n\t  }, {\n\t    key: \"matched\",\n\t    value: function matched(options) {\n\t      var _ref = options || {},\n\t          notPrevent = _ref.notPrevent;\n\t\n\t      this.el.matched = true;\n\t      !notPrevent && this.e.preventDefault();\n\t    }\n\t  }, {\n\t    key: \"isDo\",\n\t    value: function isDo() {\n\t      return !this.el.matched;\n\t    }\n\t  }]);\n\t\n\t  return Block;\n\t}();\n\t\n\texports.default = Block;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Block2 = __webpack_require__(2);\n\t\n\tvar _Block3 = _interopRequireDefault(_Block2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * 识别 # 开头的 1-5级标题, 不识别混合\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * 如: ### 这是标题三\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               **/\n\t\n\t\n\tvar Heading = function (_Block) {\n\t  _inherits(Heading, _Block);\n\t\n\t  function Heading(options) {\n\t    _classCallCheck(this, Heading);\n\t\n\t    return _possibleConstructorReturn(this, (Heading.__proto__ || Object.getPrototypeOf(Heading)).call(this, options));\n\t  }\n\t\n\t  _createClass(Heading, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      if (!this.isDo()) {\n\t        return;\n\t      }\n\t      var selection = this.selection,\n\t          el = this.el;\n\t\n\t      var value = el.data;\n\t      var reg = /^#+$/; // eslint-disable-line\n\t      var match = value ? value.match(reg) : null;\n\t      var newEl;\n\t\n\t      if (match && match[0]) {\n\t        this.matched();\n\t        selection.setRangeByEl({\n\t          startEl: el.parentNode,\n\t          startOffset: 0,\n\t          endOffset: 1\n\t        });\n\t        document.execCommand('formatBlock', false, 'H' + match[0].length);\n\t        newEl = selection.getFocusNode();\n\t        newEl.nodeValue = null;\n\t        selection.setRangeByEl({\n\t          startEl: newEl.parentNode\n\t        });\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Heading;\n\t}(_Block3.default);\n\t\n\texports.default = Heading;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Block2 = __webpack_require__(2);\n\t\n\tvar _Block3 = _interopRequireDefault(_Block2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * 识别 *** 为分隔符\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               **/\n\t\n\t\n\tvar Hr = function (_Block) {\n\t  _inherits(Hr, _Block);\n\t\n\t  function Hr(options) {\n\t    _classCallCheck(this, Hr);\n\t\n\t    return _possibleConstructorReturn(this, (Hr.__proto__ || Object.getPrototypeOf(Hr)).call(this, options));\n\t  }\n\t\n\t  _createClass(Hr, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      if (!this.isDo()) {\n\t        return;\n\t      }\n\t      var selection = this.selection,\n\t          el = this.el;\n\t\n\t      var value = el.data;\n\t      var reg = /^\\*\\*\\*$/; // eslint-disable-line\n\t      var match = value ? value.match(reg) : null;\n\t\n\t      if (match && match[0]) {\n\t        this.matched();\n\t        selection.setRangeByEl({\n\t          startEl: el.parentNode,\n\t          startOffset: 0,\n\t          endOffset: 1\n\t        });\n\t        document.execCommand('insertHorizontalRule', false, '');\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Hr;\n\t}(_Block3.default);\n\t\n\texports.default = Hr;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Block2 = __webpack_require__(2);\n\t\n\tvar _Block3 = _interopRequireDefault(_Block2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * 识别 * 或者 - 为无序列表\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * 识别 1 等数字为有序列表\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               **/\n\t\n\t\n\tvar Ul = function (_Block) {\n\t  _inherits(Ul, _Block);\n\t\n\t  function Ul(options) {\n\t    _classCallCheck(this, Ul);\n\t\n\t    return _possibleConstructorReturn(this, (Ul.__proto__ || Object.getPrototypeOf(Ul)).call(this, options));\n\t  }\n\t\n\t  _createClass(Ul, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      if (!this.isDo()) {\n\t        return;\n\t      }\n\t      var selection = this.selection,\n\t          el = this.el;\n\t\n\t      var value = el.data;\n\t      var regUn = /^(\\*|-)$/; // eslint-disable-line\n\t      var regOr = /^\\d\\.$/; // eslint-disable-line\n\t      var type, match, newEl;\n\t\n\t      if (regOr.test(value)) {\n\t        this.matched();\n\t        match = value.match(regOr);\n\t        type = 'or';\n\t      }\n\t\n\t      if (regUn.test(value)) {\n\t        this.matched();\n\t        match = value.match(regUn);\n\t        type = 'un';\n\t      }\n\t\n\t      if (match && match[0]) {\n\t        selection.setRangeByEl({\n\t          startEl: el.parentNode,\n\t          startOffset: 0,\n\t          endOffset: 1\n\t        });\n\t        if (type === 'or') {\n\t          document.execCommand('insertOrderedList', false);\n\t        }\n\t        if (type === 'un') {\n\t          document.execCommand('insertUnorderedList', false);\n\t        }\n\t        newEl = selection.getFocusNode();\n\t        newEl.nodeValue = null;\n\t        selection.setRangeByEl({\n\t          startEl: newEl.parentNode\n\t        });\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return Ul;\n\t}(_Block3.default);\n\t\n\texports.default = Ul;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Inline2 = __webpack_require__(1);\n\t\n\tvar _Inline3 = _interopRequireDefault(_Inline2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Bold = function (_Inline) {\n\t  _inherits(Bold, _Inline);\n\t\n\t  function Bold(options) {\n\t    _classCallCheck(this, Bold);\n\t\n\t    var newOptions = Object.assign({}, options, {\n\t      reg: new RegExp(/\\*\\*(\\w*\\W*)\\*\\*/),\n\t      cmdName: 'bold'\n\t    });\n\t    return _possibleConstructorReturn(this, (Bold.__proto__ || Object.getPrototypeOf(Bold)).call(this, newOptions));\n\t  }\n\t\n\t  return Bold;\n\t}(_Inline3.default);\n\t\n\texports.default = Bold;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Inline2 = __webpack_require__(1);\n\t\n\tvar _Inline3 = _interopRequireDefault(_Inline2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Italic = function (_Inline) {\n\t  _inherits(Italic, _Inline);\n\t\n\t  function Italic(options) {\n\t    _classCallCheck(this, Italic);\n\t\n\t    var newOptions = Object.assign({}, options, {\n\t      reg: new RegExp(/\\*(\\w*\\W*)\\*/),\n\t      cmdName: 'italic'\n\t    });\n\t    return _possibleConstructorReturn(this, (Italic.__proto__ || Object.getPrototypeOf(Italic)).call(this, newOptions));\n\t  }\n\t\n\t  return Italic;\n\t}(_Inline3.default);\n\t\n\texports.default = Italic;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Inline2 = __webpack_require__(1);\n\t\n\tvar _Inline3 = _interopRequireDefault(_Inline2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Strike = function (_Inline) {\n\t  _inherits(Strike, _Inline);\n\t\n\t  function Strike(options) {\n\t    _classCallCheck(this, Strike);\n\t\n\t    var newOptions = Object.assign({}, options, {\n\t      reg: new RegExp(/\\~\\~(\\w*\\W*)\\~\\~/),\n\t      cmdName: 'strikeThrough'\n\t    });\n\t    return _possibleConstructorReturn(this, (Strike.__proto__ || Object.getPrototypeOf(Strike)).call(this, newOptions));\n\t  }\n\t\n\t  return Strike;\n\t}(_Inline3.default);\n\t\n\texports.default = Strike;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Inline2 = __webpack_require__(1);\n\t\n\tvar _Inline3 = _interopRequireDefault(_Inline2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Underline = function (_Inline) {\n\t  _inherits(Underline, _Inline);\n\t\n\t  function Underline(options) {\n\t    _classCallCheck(this, Underline);\n\t\n\t    var newOptions = Object.assign({}, options, {\n\t      reg: new RegExp(/\\~(\\w*\\W*)\\~/),\n\t      cmdName: 'underline'\n\t    });\n\t    return _possibleConstructorReturn(this, (Underline.__proto__ || Object.getPrototypeOf(Underline)).call(this, newOptions));\n\t  }\n\t\n\t  return Underline;\n\t}(_Inline3.default);\n\t\n\texports.default = Underline;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Selection = function () {\n\t  function Selection(selection) {\n\t    _classCallCheck(this, Selection);\n\t\n\t    this.selection = selection;\n\t  }\n\t\n\t  _createClass(Selection, [{\n\t    key: 'getRange',\n\t    value: function getRange() {\n\t      return this.selection.getRangeAt(0);\n\t    }\n\t  }, {\n\t    key: 'getSelection',\n\t    value: function getSelection() {\n\t      return this.selection;\n\t    }\n\t  }, {\n\t    key: 'getFocusNode',\n\t    value: function getFocusNode() {\n\t      return this.selection.focusNode;\n\t    }\n\t  }, {\n\t    key: 'setRange',\n\t    value: function setRange(range) {\n\t      var selection = this.selection;\n\t      this.oldRange = Object.assign({}, this.getRange());\n\t      selection.removeAllRanges();\n\t      selection.addRange(range);\n\t    }\n\t\n\t    /**\n\t    * @param {object} startEl\n\t    * @param {number} startOffset\n\t    * @param {object} endEl  --无时，用startEl代替\n\t    * @param {object} endOffset\n\t    **/\n\t\n\t  }, {\n\t    key: 'setRangeByEl',\n\t    value: function setRangeByEl(options) {\n\t      var startEl = options.startEl,\n\t          startOffset = options.startOffset,\n\t          endEl = options.endEl,\n\t          endOffset = options.endOffset;\n\t\n\t      if (!startEl) {\n\t        return window.console.warn('No start node!');\n\t      }\n\t      var range = this.createRange();\n\t      range.setStart(startEl, startOffset || 0);\n\t      range.setEnd(endEl || startEl, endOffset || startOffset || 0);\n\t      this.setRange(range);\n\t    }\n\t  }, {\n\t    key: 'createRange',\n\t    value: function createRange() {\n\t      return document.createRange();\n\t    }\n\t  }, {\n\t    key: 'restoreRange',\n\t    value: function restoreRange() {\n\t      if (!this.oldRange) {\n\t        return window.console.warn('No old Range!');\n\t      }\n\t      this.setRange(this.oldRange);\n\t    }\n\t  }]);\n\t\n\t  return Selection;\n\t}();\n\t\n\texports.default = Selection;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/Iceter.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 612f1e329d1b0047cdd4","import './styles/main.sass'\nimport Heading from './blocks/Heading'\nimport Hr from './blocks/Hr'\nimport List from './blocks/List'\nimport Selection from './selection/Selection'\nimport Bold from './inline/Bold'\nimport Italic from './inline/Italic'\nimport Underline from './inline/Underline'\nimport Strike from './inline/Strike'\n\nclass Iceter {\n  constructor(options) {\n    const { el } = options\n\n    this.El = document.querySelector(el)\n  }\n\n  init(options) {\n    const { content } = options\n\n    this._initEl(content)\n    this.selection = new Selection(window.getSelection())\n  }\n\n  getRange() {\n    return this.selection.getRange()\n  }\n\n  setContent(content) {\n    this.init({\n      content\n    })\n  }\n\n  _initEl(content) {\n    var html = `\n      <div class=\"editor-wrap\">\n        <div class=\"editor\" contenteditable=\"true\">\n          ${content}\n        </div>\n      </div>\n    `\n    this.El.innerHTML = html\n    this.editorEl = this.El.querySelector('.editor')\n    this.editorEl.focus()\n    this._buildEvent()\n  }\n\n  _buildEvent() {\n    this.editorEl.addEventListener('keydown', (e) => this._onKeyDown(e))\n    this.editorEl.addEventListener('keyup', (e) => this._onKeyUp(e))\n    document.addEventListener('selectionchange', (e) => this._onSelectionChange(e))\n  }\n\n  _onKeyDown(e) {\n    this._mk2El(e)\n  }\n\n  _onKeyUp(e) {\n    this._mk2ElInline(e)\n  }\n\n  _onSelectionChange() {\n    //Do something\n  }\n\n  _mk2El(e) {\n    const key = e.code\n    var el = this.selection.getFocusNode()\n\n    if(key === 'Space') {\n      //尽量不重写space\n      //TODO 去除space多余的空格\n      return this._parse({\n        el,\n        e\n      })\n    }\n  }\n\n  _parse(options) {\n    const newOptions = Object.assign({\n      selection: this.selection\n    }, options)\n\n    new Heading(newOptions)\n    new Hr(newOptions)\n    new List(newOptions)\n    options.el.matched = false\n  }\n\n  _mk2ElInline(e) {\n    const key = e.code\n    const el = this.selection.getFocusNode()\n\n    return this._parseInline({\n      el,\n      e\n    })\n  }\n\n  _parseInline(options) {\n    const newOptions = Object.assign({\n      selection: this.selection\n    }, options)\n    new Bold(newOptions)\n    new Italic(newOptions)\n    new Strike(newOptions)\n    new Underline(newOptions)\n    options.el.matched = false\n  }\n\n}\n\nwindow.Iceter = Iceter\n\n\n\n// WEBPACK FOOTER //\n// ./src/Iceter.js","/**\n*  基础 inline\n**/\nclass Inline {\n  constructor(options) {\n    this.selection = options.selection\n    this.el = options.el\n    this.e = options.e\n    this.reg = options.reg\n    this.cmdName = options.cmdName\n    this.render()\n  }\n\n  render() {\n    if(!this.isDo()){\n      return\n    }\n    const { selection, reg, cmdName } = this\n    const range = selection.getRange()\n    var str\n\n    if(range.collapsed) {\n      const start = range.startOffset\n      const startContainer = range.startContainer\n      str = range.startContainer.nodeValue\n\n      if(!str) {\n        return\n      }\n      str = str.slice(0, start)\n      const result = reg.exec(str)\n      if(!result) {\n        return\n      }\n      this.matched({notPrevent: true})\n      selection.setRangeByEl({\n        startEl: startContainer,\n        startOffset: result.index,\n        endOffset: result.index + result[0].length\n      })\n      document.execCommand(cmdName, false)\n      selection.setRangeByEl({\n        startEl: startContainer,\n        startOffset: 1,\n        endOffset: 1\n      })\n    }\n  }\n\n  matched(options) {\n    const { notPrevent } = options || {}\n    this.el.matched = true\n    !notPrevent && this.e.preventDefault()\n  }\n\n  isDo() {\n    return !this.el.matched\n  }\n}\n\nexport default Inline\n\n\n// WEBPACK FOOTER //\n// ./src/inline/Inline.js","/**\n*  基础block\n**/\nclass Block {\n  constructor(options) {\n    this.selection = options.selection\n    this.el = options.el\n    this.e = options.e\n    this.render()\n  }\n\n  render() {\n    //Do nothing\n  }\n\n  matched(options) {\n    const { notPrevent } = options || {}\n    this.el.matched = true\n    !notPrevent && this.e.preventDefault()\n  }\n\n  isDo() {\n    return !this.el.matched\n  }\n}\n\nexport default Block\n\n\n\n// WEBPACK FOOTER //\n// ./src/blocks/Block.js","/**\n* 识别 # 开头的 1-5级标题, 不识别混合\n* 如: ### 这是标题三\n**/\nimport Block from './Block'\n\nclass Heading extends Block {\n  constructor(options) {\n    super(options)\n  }\n\n  render() {\n    if(!this.isDo()){\n      return\n    }\n    const { selection, el } = this\n    const value = el.data\n    const reg = /^#+$/ // eslint-disable-line\n    var match = value ? value.match(reg) : null\n    var newEl\n\n    if(match && match[0]) {\n      this.matched()\n      selection.setRangeByEl({\n        startEl: el.parentNode,\n        startOffset: 0,\n        endOffset: 1\n      })\n      document.execCommand('formatBlock', false, 'H' + match[0].length)\n      newEl = selection.getFocusNode()\n      newEl.nodeValue = null\n      selection.setRangeByEl({\n        startEl: newEl.parentNode\n      })\n    }\n  }\n}\n\nexport default Heading\n\n\n\n// WEBPACK FOOTER //\n// ./src/blocks/Heading.js","/**\n* 识别 *** 为分隔符\n**/\nimport Block from './Block'\n\nclass Hr extends Block {\n  constructor(options) {\n    super(options)\n  }\n\n  render() {\n    if(!this.isDo()) {\n      return\n    }\n    var { selection, el } = this\n    const value = el.data\n    const reg = /^\\*\\*\\*$/ // eslint-disable-line\n    const match = value ? value.match(reg) : null\n\n    if(match && match[0]) {\n      this.matched()\n      selection.setRangeByEl({\n        startEl: el.parentNode,\n        startOffset: 0,\n        endOffset: 1\n      })\n      document.execCommand('insertHorizontalRule', false, '')\n    }\n  }\n}\n\nexport default Hr\n\n\n\n// WEBPACK FOOTER //\n// ./src/blocks/Hr.js","/*\n* 识别 * 或者 - 为无序列表\n* 识别 1 等数字为有序列表\n**/\nimport Block from './Block'\n\nclass Ul extends Block {\n  constructor(options) {\n    super(options)\n  }\n\n  render() {\n    if(!this.isDo()){\n      return\n    }\n    var { selection, el } = this\n    const value = el.data\n    const regUn = /^(\\*|-)$/ // eslint-disable-line\n    const regOr = /^\\d\\.$/ // eslint-disable-line\n    var type, match, newEl\n\n    if(regOr.test(value)) {\n      this.matched()\n      match = value.match(regOr)\n      type = 'or'\n    }\n\n    if(regUn.test(value)) {\n      this.matched()\n      match = value.match(regUn)\n      type = 'un'\n    }\n\n    if(match && match[0]) {\n      selection.setRangeByEl({\n        startEl: el.parentNode,\n        startOffset: 0,\n        endOffset: 1\n      })\n      if(type === 'or') {\n        document.execCommand('insertOrderedList', false)\n      }\n      if(type === 'un') {\n        document.execCommand('insertUnorderedList', false)\n      }\n      newEl = selection.getFocusNode()\n      newEl.nodeValue = null\n      selection.setRangeByEl({\n        startEl: newEl.parentNode\n      })\n    }\n  }\n}\n\nexport default Ul\n\n\n\n// WEBPACK FOOTER //\n// ./src/blocks/List.js","import Inline from './Inline'\n\nclass Bold extends Inline {\n  constructor(options) {\n    const newOptions = Object.assign({}, options, {\n      reg: new RegExp(/\\*\\*(\\w*\\W*)\\*\\*/),\n      cmdName: 'bold'\n    })\n    super(newOptions)\n  }\n}\n\nexport default Bold\n\n\n// WEBPACK FOOTER //\n// ./src/inline/Bold.js","import Inline from './Inline'\n\nclass Italic extends Inline {\n  constructor(options) {\n    const newOptions = Object.assign({}, options, {\n      reg: new RegExp(/\\*(\\w*\\W*)\\*/),\n      cmdName: 'italic'\n    })\n    super(newOptions)\n  }\n}\n\nexport default Italic\n\n\n// WEBPACK FOOTER //\n// ./src/inline/Italic.js","import Inline from './Inline'\n\nclass Strike extends Inline {\n  constructor(options) {\n    const newOptions = Object.assign({}, options, {\n      reg: new RegExp(/\\~\\~(\\w*\\W*)\\~\\~/),\n      cmdName: 'strikeThrough'\n    })\n    super(newOptions)\n  }\n}\n\nexport default Strike\n\n\n// WEBPACK FOOTER //\n// ./src/inline/Strike.js","import Inline from './Inline'\n\nclass Underline extends Inline {\n  constructor(options) {\n    const newOptions = Object.assign({}, options, {\n      reg: new RegExp(/\\~(\\w*\\W*)\\~/),\n      cmdName: 'underline'\n    })\n    super(newOptions)\n  }\n}\n\nexport default Underline\n\n\n// WEBPACK FOOTER //\n// ./src/inline/Underline.js","class Selection {\n  constructor(selection) {\n    this.selection = selection\n  }\n\n  getRange() {\n    return this.selection.getRangeAt(0)\n  }\n\n  getSelection() {\n    return this.selection\n  }\n\n  getFocusNode() {\n    return this.selection.focusNode\n  }\n\n  setRange(range) {\n    var selection = this.selection\n    this.oldRange = Object.assign({}, this.getRange())\n    selection.removeAllRanges()\n    selection.addRange(range)\n  }\n\n  /**\n  * @param {object} startEl\n  * @param {number} startOffset\n  * @param {object} endEl  --无时，用startEl代替\n  * @param {object} endOffset\n  **/\n  setRangeByEl(options) {\n    var { startEl, startOffset, endEl, endOffset } = options\n    if(!startEl) {\n      return window.console.warn('No start node!')\n    }\n    var range = this.createRange()\n    range.setStart(startEl, startOffset || 0)\n    range.setEnd(endEl || startEl, endOffset || startOffset || 0)\n    this.setRange(range)\n  }\n\n  createRange() {\n    return document.createRange()\n  }\n\n  restoreRange() {\n    if(!this.oldRange) {\n      return window.console.warn('No old Range!')\n    }\n    this.setRange(this.oldRange)\n  }\n}\n\nexport default Selection\n\n\n\n// WEBPACK FOOTER //\n// ./src/selection/Selection.js"],"sourceRoot":""}